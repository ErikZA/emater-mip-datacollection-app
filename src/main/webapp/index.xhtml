<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pm="http://primefaces.org/mobile"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

    <f:metadata>
        <f:viewAction action="#{mobileNavigationController.initMobile}"/>
    </f:metadata>

    <f:view renderKitId="PRIMEFACES_MOBILE" >

        <h:head>
            <title>Facelet Title</title>
        </h:head>

        <h:body>

            <pm:page id="sampleCollectionDatePage">
                <pm:header title="Data da amostra" swatch="b"></pm:header>
                <pm:content>
                    <h:form id="sampleCollectionDateForm">
                        <p:calendar value="#{pestSampleCollectionBean.sampleCollectionDate}" pattern="dd/MM/yyyy" mode="inline" />

                        <p:commandButton value="Selecionar Data" icon="ui-icon-check" iconPos="top" 
                                         action="#{pestSampleCollectionBean.onSampleCollectionDate}"
                                         ajax="false"/>
                    </h:form>
                </pm:content>
            </pm:page>

            <pm:page id="sampleCollectionCropPage">
                <pm:header title="Cultivar" swatch="b">
                    <p:button outcome="pm:sampleCollectionDatePage" value="Voltar" icon="ui-icon-arrow-l" styleClass="ui-btn-left ui-btn-inline"/>
                </pm:header>
                <pm:content>
                    <h:form id="sampleCollectionCropForm">
                        
                        <p:dataList id="sampleCollectionCropDataList" value="#{pestSampleCollectionBean.cropList}"
                                    var="crop" pt:data-filter="true">
                            
                            <p:commandLink action="#{pestSampleCollectionBean.onSelectCrop()}">

                                <f:param name="cropName" value="#{crop.name}"/>
                                <!--<p:graphicImage value="#{crop.farmer.pictureURL}" />-->
                                <h2>#{crop.name}</h2>                                
                                <p>#{crop.farmer.name}</p>
                                <p>#{crop.harvest.name}</p>
                            </p:commandLink>
                        </p:dataList>

                    </h:form>
                </pm:content>
            </pm:page>

            <pm:page id="pestSelectionInternalPage">
                <pm:header title="Selecionar Inseto Peste" swatch="b">
                    <p:button outcome="pm:sampleCollectionCropPage" value="Voltar" icon="ui-icon-arrow-l" styleClass="ui-btn-left ui-btn-inline"/>
                </pm:header>
                <pm:content>
                    <h:form id="pestSelectionForm">

                        <p:dataList id="pestSelectionFormDataList" value="#{pestSampleCollectionBean.pestList}"
                                    var="pest" pt:data-filter="true">
                            <p:commandLink action="#{pestSampleCollectionBean.onSelectPest()}"
                                           update=":pestCollectionInternalPage">

                                <f:param name="pestScientificName" value="#{pest.scientificName}"/>
                                <p:graphicImage value="#{pest.figureURL}" />
                                <h2>#{pest.commonName}</h2>
                                <p>#{pest.scientificName}</p>

                            </p:commandLink>
                        </p:dataList>

                    </h:form>
                </pm:content>
            </pm:page>

            <pm:page id="pestCollectionInternalPage">
                <pm:header title="Informar Amostra Para Cada Tamanho" swatch="b">
                    <p:button outcome="pm:pestSelectionInternalPage" value="Voltar" icon="ui-icon-arrow-l" styleClass="ui-btn-left ui-btn-inline"/>
                </pm:header>
                <pm:content>
                    <h:form id="pestSampleCollectionForm">

                        <p:growl id="messages"/>

                        <h:panelGrid columns="2">

                            <p:outputLabel for="sampleCollectionDate" value="Data de Coleta"/>
                            <p:outputLabel id="sampleCollectionDate" value="#{pestSampleCollectionBean.sampleCollectionDate}"/>

                            <p:outputLabel for="crop" value="Cultivar"/>
                            <p:outputLabel id="crop" value="#{pestSampleCollectionBean.cropSelected.name}"/>

                            <p:outputLabel for="pest" value="Inseto Praga"/>
                            <p:outputLabel id="pest" value="#{pestSampleCollectionBean.pestSelected.commonName}"/>

                            <p:outputLabel for="data" value="Quantidade Encontrada"/>
                            <!--<p:inputText id="data" value="#{pestSampleCollectionBean.sampleValue}"/>-->
                            <pm:inputSlider id="data" value="#{pestSampleCollectionBean.sampleValue}"/>

                        </h:panelGrid>

                        <p:commandButton value="Gravar Amostra" icon="ui-icon-check" iconPos="top"
                                         action="#{pestSampleCollectionBean.save()}"
                                         ajax="false"/>

                    </h:form>
                </pm:content>
            </pm:page>
        </h:body>

    </f:view>


</html>

